import{r as i,u as v,o as w,c as V,a,d as u,e as y,i as b,w as x,b as S,l as p,f as _,g,h as U}from"./index-DceZlvFz.js";import{a as k,b as B,_ as C}from"./UserDetails-BocE_Jjg.js";import{_ as f,a as N}from"./ButtonComponent-DXip0urD.js";const $={class:"mb-6"},A={__name:"PasswordComponent",setup(P){const s=i(""),l=i(""),o=i(""),r=k(),d=v(),n=B(),c=()=>{if(l.value===""||o.value===""||s.value===""){n.error({text:"Please fill in all fields."});return}if(l.value!==o.value){n.error({text:"The password and confirm password do not match."});return}r.show();try{d.updatePassword(s.value,l.value,o.value),n.success()}catch(m){console.error(m),n.error({text:m.response.data.title})}finally{r.hide(),s.value="",l.value="",o.value=""}};return(m,e)=>(w(),V("div",null,[e[7]||(e[7]=a("h2",null,"Set/Update Password",-1)),a("form",{onSubmit:x(c,["prevent"])},[a("div",$,[e[3]||(e[3]=a("label",{for:"oldPassword"},"Old Password",-1)),u(f,{type:"password",name:"oldPassword",modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value=t)},null,8,["modelValue"])]),a("div",null,[e[4]||(e[4]=a("label",{for:"password"},"Password",-1)),u(f,{type:"password",name:"password",modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value=t)},null,8,["modelValue"])]),a("div",null,[e[5]||(e[5]=a("label",{for:"confirmPassword"},"Confirm Password",-1)),u(f,{type:"password",name:"confirmPassword",modelValue:o.value,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value=t)},null,8,["modelValue"])]),u(N,{class:"mt-4",type:"submit"},{default:y(()=>e[6]||(e[6]=[b("Submit")])),_:1})],32)]))}},L={__name:"AccountView",setup(P){const s=v(),l=U();return S(async()=>{try{s.user=await s.getSelf()}catch(o){console.error(o),s.logout(),l.push({name:"login"})}}),(o,r)=>(w(),V("div",null,[p(s).user?(w(),_(C,{key:0,modelValue:p(s).user,"onUpdate:modelValue":r[0]||(r[0]=d=>p(s).user=d)},null,8,["modelValue"])):g("",!0),r[1]||(r[1]=a("hr",{class:"my-4"},null,-1)),u(A)]))}};export{L as default};
